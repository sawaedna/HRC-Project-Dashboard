"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "src_component_MapView_js";
exports.ids = ["src_component_MapView_js"];
exports.modules = {

/***/ "./src/component/MapView.js":
/*!**********************************!*\
  !*** ./src/component/MapView.js ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var leaflet__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! leaflet */ \"leaflet\");\n/* harmony import */ var leaflet__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(leaflet__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _utils_data__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/data */ \"./src/utils/data.js\");\n\n\n\n\nconst MapView = ({ geo, setFilter })=>{\n    const mapRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        // Check if a map instance already exists\n        if (mapRef.current) {\n            mapRef.current.off();\n            mapRef.current.remove();\n        }\n        const newMap = leaflet__WEBPACK_IMPORTED_MODULE_2___default().map(\"map\", {\n            preferCanvas: true\n        });\n        leaflet__WEBPACK_IMPORTED_MODULE_2___default().tileLayer(\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\", {\n            attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors',\n            maxZoom: 18,\n            minZoom: 4\n        }).addTo(newMap);\n        const latlngs = [];\n        geo.forEach((g)=>{\n            const ok = g.Latitude != null && g.Longitude != null;\n            if (!ok) return;\n            const ll = leaflet__WEBPACK_IMPORTED_MODULE_2___default().latLng(Number(g.Latitude), Number(g.Longitude));\n            latlngs.push(ll);\n            leaflet__WEBPACK_IMPORTED_MODULE_2___default().marker(ll).addTo(newMap).bindPopup(`<b>${g[\"الموقع\"]}</b><br>مخطط: ${(0,_utils_data__WEBPACK_IMPORTED_MODULE_3__.pct)((0,_utils_data__WEBPACK_IMPORTED_MODULE_3__.normalizePercent)(g[\"متوسط النسبة المخططة\"]))}<br>فعلي: ${(0,_utils_data__WEBPACK_IMPORTED_MODULE_3__.pct)((0,_utils_data__WEBPACK_IMPORTED_MODULE_3__.normalizePercent)(g[\"متوسط النسبة الفعلية\"]))}`).on(\"click\", ()=>setFilter(\"site\", g[\"الموقع\"]));\n        });\n        if (latlngs.length > 0) {\n            newMap.fitBounds(leaflet__WEBPACK_IMPORTED_MODULE_2___default().latLngBounds(latlngs).pad(0.12), {\n                padding: [\n                    48,\n                    48\n                ],\n                maxZoom: 6,\n                animate: true\n            });\n        } else {\n            newMap.setView([\n                24.7136,\n                46.6753\n            ], 6);\n        }\n        mapRef.current = newMap;\n        return ()=>{\n            // Cleanup function to remove map instance on component unmount\n            if (mapRef.current) {\n                mapRef.current.off();\n                mapRef.current.remove();\n                mapRef.current = null;\n            }\n        };\n    }, [\n        geo,\n        setFilter\n    ]);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"section\", {\n        className: \"panel-card dashboard-map-panel summary-grid__map\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"panel-header dashboard-panel-header\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h3\", {\n                    children: \"المواقع\"\n                }, void 0, false, {\n                    fileName: \"D:\\\\00_Main_Projects\\\\HRC_Project\\\\00_HRC_Project_Main\\\\src\\\\component\\\\MapView.js\",\n                    lineNumber: 55,\n                    columnNumber: 9\n                }, undefined)\n            }, void 0, false, {\n                fileName: \"D:\\\\00_Main_Projects\\\\HRC_Project\\\\00_HRC_Project_Main\\\\src\\\\component\\\\MapView.js\",\n                lineNumber: 54,\n                columnNumber: 7\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                id: \"map\",\n                className: \"dashboard-map\"\n            }, void 0, false, {\n                fileName: \"D:\\\\00_Main_Projects\\\\HRC_Project\\\\00_HRC_Project_Main\\\\src\\\\component\\\\MapView.js\",\n                lineNumber: 57,\n                columnNumber: 7\n            }, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"D:\\\\00_Main_Projects\\\\HRC_Project\\\\00_HRC_Project_Main\\\\src\\\\component\\\\MapView.js\",\n        lineNumber: 53,\n        columnNumber: 5\n    }, undefined);\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (MapView);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvY29tcG9uZW50L01hcFZpZXcuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQWlEO0FBQ3pCO0FBQzhCO0FBRXRELE1BQU1NLFVBQVUsQ0FBQyxFQUFFQyxHQUFHLEVBQUVDLFNBQVMsRUFBRTtJQUNqQyxNQUFNQyxTQUFTUCw2Q0FBTUEsQ0FBQztJQUV0QkQsZ0RBQVNBLENBQUM7UUFDUix5Q0FBeUM7UUFDekMsSUFBSVEsT0FBT0MsT0FBTyxFQUFFO1lBQ2xCRCxPQUFPQyxPQUFPLENBQUNDLEdBQUc7WUFDbEJGLE9BQU9DLE9BQU8sQ0FBQ0UsTUFBTTtRQUN2QjtRQUVBLE1BQU1DLFNBQVNWLGtEQUFLLENBQUMsT0FBTztZQUFFWSxjQUFjO1FBQUs7UUFDakRaLHdEQUFXLENBQUMsc0RBQXNEO1lBQ2hFYyxhQUFhO1lBQ2JDLFNBQVM7WUFDVEMsU0FBUztRQUNYLEdBQUdDLEtBQUssQ0FBQ1A7UUFFVCxNQUFNUSxVQUFVLEVBQUU7UUFDbEJkLElBQUllLE9BQU8sQ0FBQyxDQUFDQztZQUNYLE1BQU1DLEtBQUtELEVBQUVFLFFBQVEsSUFBSSxRQUFRRixFQUFFRyxTQUFTLElBQUk7WUFDaEQsSUFBSSxDQUFDRixJQUFJO1lBQ1QsTUFBTUcsS0FBS3hCLHFEQUFRLENBQUMwQixPQUFPTixFQUFFRSxRQUFRLEdBQUdJLE9BQU9OLEVBQUVHLFNBQVM7WUFDMURMLFFBQVFTLElBQUksQ0FBQ0g7WUFDYnhCLHFEQUFRLENBQUN3QixJQUNOUCxLQUFLLENBQUNQLFFBQ05tQixTQUFTLENBQUMsQ0FBQyxHQUFHLEVBQUVULENBQUMsQ0FBQyxTQUFTLENBQUMsY0FBYyxFQUFFbEIsZ0RBQUdBLENBQUNELDZEQUFnQkEsQ0FBQ21CLENBQUMsQ0FBQyx1QkFBdUIsR0FBRyxVQUFVLEVBQUVsQixnREFBR0EsQ0FBQ0QsNkRBQWdCQSxDQUFDbUIsQ0FBQyxDQUFDLHVCQUF1QixHQUFHLENBQUMsRUFDM0pVLEVBQUUsQ0FBQyxTQUFTLElBQU16QixVQUFVLFFBQVFlLENBQUMsQ0FBQyxTQUFTO1FBQ3BEO1FBRUEsSUFBSUYsUUFBUWEsTUFBTSxHQUFHLEdBQUc7WUFDdEJyQixPQUFPc0IsU0FBUyxDQUFDaEMsMkRBQWMsQ0FBQ2tCLFNBQVNnQixHQUFHLENBQUMsT0FBTztnQkFBRUMsU0FBUztvQkFBQztvQkFBSTtpQkFBRztnQkFBRXBCLFNBQVM7Z0JBQUdxQixTQUFTO1lBQUs7UUFDckcsT0FBTztZQUNMMUIsT0FBTzJCLE9BQU8sQ0FBQztnQkFBQztnQkFBUzthQUFRLEVBQUU7UUFDckM7UUFFQS9CLE9BQU9DLE9BQU8sR0FBR0c7UUFFakIsT0FBTztZQUNMLCtEQUErRDtZQUMvRCxJQUFJSixPQUFPQyxPQUFPLEVBQUU7Z0JBQ2xCRCxPQUFPQyxPQUFPLENBQUNDLEdBQUc7Z0JBQ2xCRixPQUFPQyxPQUFPLENBQUNFLE1BQU07Z0JBQ3JCSCxPQUFPQyxPQUFPLEdBQUc7WUFDbkI7UUFDRjtJQUNGLEdBQUc7UUFBQ0g7UUFBS0M7S0FBVTtJQUVuQixxQkFDRSw4REFBQ2lDO1FBQVFDLFdBQVU7OzBCQUNqQiw4REFBQ0M7Z0JBQUlELFdBQVU7MEJBQ2IsNEVBQUNFOzhCQUFHOzs7Ozs7Ozs7OzswQkFFTiw4REFBQ0Q7Z0JBQUlFLElBQUc7Z0JBQU1ILFdBQVU7Ozs7Ozs7Ozs7OztBQUc5QjtBQUVBLGlFQUFlcEMsT0FBT0EsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2hyYy1kYXNoYm9hcmQtYXIvLi9zcmMvY29tcG9uZW50L01hcFZpZXcuanM/NTQyOSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgdXNlRWZmZWN0LCB1c2VSZWYgfSBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCBMIGZyb20gJ2xlYWZsZXQnO1xyXG5pbXBvcnQgeyBub3JtYWxpemVQZXJjZW50LCBwY3QgfSBmcm9tICcuLi91dGlscy9kYXRhJztcclxuXHJcbmNvbnN0IE1hcFZpZXcgPSAoeyBnZW8sIHNldEZpbHRlciB9KSA9PiB7XHJcbiAgY29uc3QgbWFwUmVmID0gdXNlUmVmKG51bGwpO1xyXG5cclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgLy8gQ2hlY2sgaWYgYSBtYXAgaW5zdGFuY2UgYWxyZWFkeSBleGlzdHNcclxuICAgIGlmIChtYXBSZWYuY3VycmVudCkge1xyXG4gICAgICBtYXBSZWYuY3VycmVudC5vZmYoKTtcclxuICAgICAgbWFwUmVmLmN1cnJlbnQucmVtb3ZlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgbmV3TWFwID0gTC5tYXAoJ21hcCcsIHsgcHJlZmVyQ2FudmFzOiB0cnVlIH0pO1xyXG4gICAgTC50aWxlTGF5ZXIoJ2h0dHBzOi8ve3N9LnRpbGUub3BlbnN0cmVldG1hcC5vcmcve3p9L3t4fS97eX0ucG5nJywge1xyXG4gICAgICBhdHRyaWJ1dGlvbjogJyZjb3B5OyA8YSBocmVmPVwiaHR0cHM6Ly93d3cub3BlbnN0cmVldG1hcC5vcmcvY29weXJpZ2h0XCI+T3BlblN0cmVldE1hcDwvYT4gY29udHJpYnV0b3JzJyxcclxuICAgICAgbWF4Wm9vbTogMTgsXHJcbiAgICAgIG1pblpvb206IDQsXHJcbiAgICB9KS5hZGRUbyhuZXdNYXApO1xyXG5cclxuICAgIGNvbnN0IGxhdGxuZ3MgPSBbXTtcclxuICAgIGdlby5mb3JFYWNoKChnKSA9PiB7XHJcbiAgICAgIGNvbnN0IG9rID0gZy5MYXRpdHVkZSAhPSBudWxsICYmIGcuTG9uZ2l0dWRlICE9IG51bGw7XHJcbiAgICAgIGlmICghb2spIHJldHVybjtcclxuICAgICAgY29uc3QgbGwgPSBMLmxhdExuZyhOdW1iZXIoZy5MYXRpdHVkZSksIE51bWJlcihnLkxvbmdpdHVkZSkpO1xyXG4gICAgICBsYXRsbmdzLnB1c2gobGwpO1xyXG4gICAgICBMLm1hcmtlcihsbClcclxuICAgICAgICAuYWRkVG8obmV3TWFwKVxyXG4gICAgICAgIC5iaW5kUG9wdXAoYDxiPiR7Z1tcItin2YTZhdmI2YLYuVwiXX08L2I+PGJyPtmF2K7Yt9i3OiAke3BjdChub3JtYWxpemVQZXJjZW50KGdbXCLZhdiq2YjYs9i3INin2YTZhtiz2KjYqSDYp9mE2YXYrti32LfYqVwiXSkpfTxicj7Zgdi52YTZijogJHtwY3Qobm9ybWFsaXplUGVyY2VudChnW1wi2YXYqtmI2LPYtyDYp9mE2YbYs9io2Kkg2KfZhNmB2LnZhNmK2KlcIl0pKX1gKVxyXG4gICAgICAgIC5vbignY2xpY2snLCAoKSA9PiBzZXRGaWx0ZXIoJ3NpdGUnLCBnWyfYp9mE2YXZiNmC2LknXSkpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaWYgKGxhdGxuZ3MubGVuZ3RoID4gMCkge1xyXG4gICAgICBuZXdNYXAuZml0Qm91bmRzKEwubGF0TG5nQm91bmRzKGxhdGxuZ3MpLnBhZCgwLjEyKSwgeyBwYWRkaW5nOiBbNDgsIDQ4XSwgbWF4Wm9vbTogNiwgYW5pbWF0ZTogdHJ1ZSB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIG5ld01hcC5zZXRWaWV3KFsyNC43MTM2LCA0Ni42NzUzXSwgNik7XHJcbiAgICB9XHJcblxyXG4gICAgbWFwUmVmLmN1cnJlbnQgPSBuZXdNYXA7XHJcblxyXG4gICAgcmV0dXJuICgpID0+IHtcclxuICAgICAgLy8gQ2xlYW51cCBmdW5jdGlvbiB0byByZW1vdmUgbWFwIGluc3RhbmNlIG9uIGNvbXBvbmVudCB1bm1vdW50XHJcbiAgICAgIGlmIChtYXBSZWYuY3VycmVudCkge1xyXG4gICAgICAgIG1hcFJlZi5jdXJyZW50Lm9mZigpO1xyXG4gICAgICAgIG1hcFJlZi5jdXJyZW50LnJlbW92ZSgpO1xyXG4gICAgICAgIG1hcFJlZi5jdXJyZW50ID0gbnVsbDtcclxuICAgICAgfVxyXG4gICAgfTtcclxuICB9LCBbZ2VvLCBzZXRGaWx0ZXJdKTtcclxuXHJcbiAgcmV0dXJuIChcclxuICAgIDxzZWN0aW9uIGNsYXNzTmFtZT1cInBhbmVsLWNhcmQgZGFzaGJvYXJkLW1hcC1wYW5lbCBzdW1tYXJ5LWdyaWRfX21hcFwiPlxyXG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cInBhbmVsLWhlYWRlciBkYXNoYm9hcmQtcGFuZWwtaGVhZGVyXCI+XHJcbiAgICAgICAgPGgzPtin2YTZhdmI2KfZgti5PC9oMz5cclxuICAgICAgPC9kaXY+XHJcbiAgICAgIDxkaXYgaWQ9XCJtYXBcIiBjbGFzc05hbWU9XCJkYXNoYm9hcmQtbWFwXCI+PC9kaXY+XHJcbiAgICA8L3NlY3Rpb24+XHJcbiAgKTtcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IE1hcFZpZXc7Il0sIm5hbWVzIjpbIlJlYWN0IiwidXNlRWZmZWN0IiwidXNlUmVmIiwiTCIsIm5vcm1hbGl6ZVBlcmNlbnQiLCJwY3QiLCJNYXBWaWV3IiwiZ2VvIiwic2V0RmlsdGVyIiwibWFwUmVmIiwiY3VycmVudCIsIm9mZiIsInJlbW92ZSIsIm5ld01hcCIsIm1hcCIsInByZWZlckNhbnZhcyIsInRpbGVMYXllciIsImF0dHJpYnV0aW9uIiwibWF4Wm9vbSIsIm1pblpvb20iLCJhZGRUbyIsImxhdGxuZ3MiLCJmb3JFYWNoIiwiZyIsIm9rIiwiTGF0aXR1ZGUiLCJMb25naXR1ZGUiLCJsbCIsImxhdExuZyIsIk51bWJlciIsInB1c2giLCJtYXJrZXIiLCJiaW5kUG9wdXAiLCJvbiIsImxlbmd0aCIsImZpdEJvdW5kcyIsImxhdExuZ0JvdW5kcyIsInBhZCIsInBhZGRpbmciLCJhbmltYXRlIiwic2V0VmlldyIsInNlY3Rpb24iLCJjbGFzc05hbWUiLCJkaXYiLCJoMyIsImlkIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/component/MapView.js\n");

/***/ })

};
;